C51 COMPILER V9.59.0.0   MAIN                                                              02/26/2019 18:44:15 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Program Files (x86)\Keil_v5\C51\BIN\C51.EXE main.c LARGE OMF2 OPTIMIZE(8,SPEED) BROWSE DEBUG PRI
                    -NT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "rtx51tny.h"
   2          
   3          #include <stdio.h>
   4          #include <stdlib.h>
   5          #include <string.h>
   6          
   7          #include "stc12c5a60s2.h"
   8          #include "delay.h"
   9          #include "gpio.h"
  10          #include "lcd1602.h"
  11          #include "binary.h"
  12          
  13          
  14          #include "hardware_serial2.h"
  15          
  16          /*Define UART parity mode*/
  17          
  18          #define FOSC 11059200L      //System frequency
  19          #define BAUD 115200         //UART baudrate
  20          
  21          char buff[32] = "";
  22          
  23          void Startup_Task() _task_ 0
  24          {
  25   1              os_create_task(1); //task1  
  26   1              os_delete_task(0); //delet task0        
  27   1      }
  28          
  29          void Lcd_Task() _task_ 1
  30          {
  31   1              int i = 0;
  32   1              Lcd1602 lcd;
  33   1              Lcd1602_create(&lcd, P2_7, P2_6, P2_5, P2_4, P2_3, P2_2);
  34   1              Lcd1602_init(&lcd);
  35   1              for(;;)
  36   1              {
  37   2                      Lcd1602_setCursor(&lcd, 0, 0);
  38   2                      Lcd1602_print(&lcd, "Hello, World!");
  39   2                      
  40   2                      Lcd1602_setCursor(&lcd, 0, 1);
  41   2                      sprintf(buff, "%d    ", i++);
  42   2                      Lcd1602_print(&lcd, buff);
  43   2                      delay_ms(5000);
  44   2              }
  45   1      }
  46          
  47          /*
  48          void Startup_Task() _task_ 0
  49          {
  50                  Serial2_init(FOSC, BAUD);
  51                          
  52                  os_create_task(1); //task1  
  53                  os_create_task(2); //task2
  54                  os_delete_task(0); //delet task0        
C51 COMPILER V9.59.0.0   MAIN                                                              02/26/2019 18:44:15 PAGE 2   

  55          }
  56          
  57          void Serial_Task() _task_ 1
  58          {
  59                  for (;;)
  60                  {
  61                          Serial2_sendString("Hello, World!\n");
  62                          delay_ms(1000);
  63                  }
  64          }
  65          
  66          void Lcd_Task() _task_ 2
  67          {
  68                  uint16_t readSize;
  69                  int i = 0;
  70                  Lcd1602 lcd;
  71                  Lcd1602_create(&lcd, P2_7, P2_6, P2_5, P2_4, P2_3, P2_2);
  72                  Lcd1602_init(&lcd);
  73                  for (;;)
  74                  {
  75                          Lcd1602_setCursor(&lcd, 0, 0);
  76                          sprintf(buff, "%d  ", i++);
  77                          Lcd1602_print(&lcd, buff);
  78                          
  79          //              readSize = Serial2_recv(buff, 32);
  80                          
  81                          
  82                          for(i = 0;Serial2_avaliable() > 0; ++i)
  83                          {
  84                                  buff[i] = Serial2_recvByte();
  85                          }
  86                          buff[i] = '\0';
  87                          
  88                          readSize = Serial2_recvWithBlock(buff, 32);
  89                          Lcd1602_setCursor(&lcd, 0, 1);
  90                          Lcd1602_send(&lcd, buff, readSize);
  91                  }
  92          }
  93          */
  94          
  95          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    185    ----
   CONSTANT SIZE    =     21    ----
   XDATA SIZE       =     32      13
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
